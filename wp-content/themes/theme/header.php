<?php
/**
 * The header for our theme
 *
 * This is the template that displays all of the <head> section and everything up until <div id="content">
 *
 * @link https://developer.wordpress.org/themes/basics/template-files/#template-partials
 *
 * @package Theme
 */

$logo = theme('logo');
$phones = @settings('phones');
$emails = @settings('emails');
$socials = @settings('socials');
$addresses = @settings('addresses');
?>
<!doctype html>
<html <?php language_attributes(); ?>>
<head>
    <meta charset="<?php bloginfo('charset'); ?>">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="profile" href="https://gmpg.org/xfn/11">
    <link href="https://unpkg.com/filepond@^4/dist/filepond.css" rel="stylesheet" />
    <?php wp_head(); ?>
</head>

<body <?php body_class(); ?>>
<header id="header" class="site-header">
    <div class="header">
        <div class="header__top">
            <div class="container">
                <?php
                wp_nav_menu([
                    'theme_location' => 'headerMenu',
                    'container' => false,
                    'menu' => 'Главное',
                    'menu_class' => 'menuTop',
                    'echo' => true,
                    'fallback_cb' => 'wp_page_menu',
                    'items_wrap' => '<ul id="%1$s" class="%2$s">%3$s</ul>',
                    'depth' => 2,
                ]);
                ?>
            </div>
        </div>

        <div class="header__middle">
            <div class="container">
                <div class="middle-wrapper">
                    <?php if ($logo) { ?>
                        <a href="/" class="logo">
                            <?= $logo; ?>
                        </a>
                    <?php } ?>

                    <?php if ($addresses) { ?>
                        <div class="address">
                            <div class="icon">
                                <?= inline('assets/images/map.svg'); ?>
                            </div>

                            <div class="item__text">
                                <?= $addresses[0]['value']; ?>
                            </div>
                        </div>
                    <?php } ?>

                    <?php if ($phones || $emails) { ?>
                        <div class="phone">
                            <a href="tel:<?= $phones[0]['value']; ?>" class="icon">
                                <?= inline('assets/images/phone.svg'); ?>
                            </a>

                            <div class="items-wrapper">
                                <a href="tel:<?= $phones[0]['value']; ?>" class="item__text">
                                    <?= $phones[0]['value']; ?>
                                </a>

                                <a href="mailto:<?= $emails[0]['value']; ?>" class="item__subtext">
                                    <?= $emails[0]['value']; ?>
                                </a>
                            </div>
                        </div>
                    <?php } ?>

                    <a href="<?= wc_get_cart_url(); ?>" class="cart-btn">
                        <?php if (WC()->cart->get_cart_contents_count() > 0) { ?>
                            <div class="icon">
                                <?= inline('assets/images/shopping-bag.svg'); ?>
                            </div>
                        <?php } else { ?>
                            <div class="icon cart disabled">
                                <?= inline('assets/images/shopping-bag.svg'); ?>
                            </div>
                        <?php } ?>


                        <div class="cart-btn__text">
                            <div class="cart-btn__text-top">
                                <h4>
                                    Корзина
                                </h4>

                                <?php if (WC()->cart->get_cart_contents_count() > 1) { ?>
                                    <h5>
                                        <?= WC()->cart->get_cart_contents_count(); ?> товара
                                    </h5>
                                <?php } ?>
                            </div>

                            <?php if (GetWCMinPrice()) { ?>
                                <h5>
                                    Минимальный заказ от <?php GetConvertedWCMinPrice(); ?>₽
                                </h5>
                            <?php } ?>
                        </div>
                    </a>

                    <div class="burger open_menu">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                </div>
            </div>
        </div>

        <div class="header__bottom">
            <div class="container">
                <div class="header__bottom-wrapper">
                    <a href="/shop" class="btn shop-btn">
                        <div class="icon-white">
                            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14"
                                 fill="none">
                                <path d="M1.58664 4.4625C1.70072 4.49599 1.81038 4.54299 1.91331 4.6025C2.27487 4.81829 2.68808 4.93223 3.10914 4.93223C3.5302 4.93223 3.94342 4.81829 4.30498 4.6025C4.53275 4.47367 4.78997 4.40597 5.05164 4.40597C5.31332 4.40597 5.57054 4.47367 5.79831 4.6025C6.16424 4.81174 6.57845 4.9218 6.99998 4.9218C7.4215 4.9218 7.83572 4.81174 8.20164 4.6025C8.42941 4.47367 8.68664 4.40597 8.94831 4.40597C9.20999 4.40597 9.46721 4.47367 9.69498 4.6025C10.0647 4.81377 10.4825 4.92628 10.9083 4.92916C11.3197 4.92832 11.723 4.81538 12.075 4.6025C12.1779 4.54299 12.2876 4.49599 12.4016 4.4625C12.5502 4.41918 12.6754 4.31863 12.7498 4.18298C12.8242 4.04733 12.8416 3.88769 12.7983 3.73916C12.755 3.59064 12.6544 3.46541 12.5188 3.39102C12.3831 3.31663 12.2235 3.29918 12.075 3.3425C11.8705 3.40561 11.6745 3.49378 11.4916 3.605C11.3058 3.71367 11.0944 3.77094 10.8791 3.77094C10.6639 3.77094 10.4525 3.71367 10.2666 3.605C9.86219 3.37812 9.40622 3.25897 8.94248 3.25897C8.47873 3.25897 8.02277 3.37812 7.61831 3.605C7.43051 3.71411 7.21718 3.77159 6.99998 3.77159C6.78278 3.77159 6.56945 3.71411 6.38164 3.605C5.97719 3.37812 5.52122 3.25897 5.05748 3.25897C4.59373 3.25897 4.13777 3.37812 3.73331 3.605C3.54748 3.71367 3.33608 3.77094 3.12081 3.77094C2.90554 3.77094 2.69414 3.71367 2.50831 3.605C2.32543 3.49378 2.1295 3.40561 1.92498 3.3425C1.77646 3.29918 1.61681 3.31663 1.48116 3.39102C1.34551 3.46541 1.24496 3.59064 1.20164 3.73916C1.15833 3.88769 1.17578 4.04733 1.25017 4.18298C1.32456 4.31863 1.44979 4.41918 1.59831 4.4625H1.58664ZM12.0866 9.17583C11.8821 9.23895 11.6862 9.32712 11.5033 9.43833C11.3175 9.547 11.1061 9.60428 10.8908 9.60428C10.6755 9.60428 10.4641 9.547 10.2783 9.43833C9.87385 9.21146 9.41789 9.09231 8.95414 9.09231C8.4904 9.09231 8.03444 9.21146 7.62998 9.43833C7.44218 9.54745 7.22884 9.60492 7.01164 9.60492C6.79445 9.60492 6.58111 9.54745 6.39331 9.43833C5.98885 9.21146 5.53289 9.09231 5.06914 9.09231C4.6054 9.09231 4.14944 9.21146 3.74498 9.43833C3.55915 9.547 3.34775 9.60428 3.13248 9.60428C2.9172 9.60428 2.70581 9.547 2.51998 9.43833C2.3371 9.32712 2.14117 9.23895 1.93664 9.17583C1.8631 9.15438 1.78606 9.14763 1.70991 9.15595C1.63376 9.16428 1.55999 9.18752 1.49282 9.22436C1.42566 9.26119 1.3664 9.31089 1.31844 9.37063C1.27048 9.43036 1.23476 9.49896 1.21331 9.5725C1.19186 9.64604 1.18511 9.72308 1.19343 9.79923C1.20176 9.87538 1.225 9.94915 1.26184 10.0163C1.29867 10.0835 1.34837 10.1427 1.40811 10.1907C1.46784 10.2387 1.53644 10.2744 1.60998 10.2958C1.72405 10.3293 1.83372 10.3763 1.93664 10.4358C2.2982 10.6516 2.71142 10.7656 3.13248 10.7656C3.55354 10.7656 3.96675 10.6516 4.32831 10.4358C4.55608 10.307 4.8133 10.2393 5.07498 10.2393C5.33665 10.2393 5.59388 10.307 5.82164 10.4358C6.18757 10.6451 6.60179 10.7551 7.02331 10.7551C7.44483 10.7551 7.85905 10.6451 8.22498 10.4358C8.45275 10.307 8.70997 10.2393 8.97164 10.2393C9.23332 10.2393 9.49054 10.307 9.71831 10.4358C10.088 10.6471 10.5059 10.7596 10.9316 10.7625C11.343 10.7617 11.7463 10.6487 12.0983 10.4358C12.2012 10.3763 12.3109 10.3293 12.425 10.2958C12.5735 10.2525 12.6987 10.152 12.7731 10.0163C12.8475 9.88067 12.865 9.72102 12.8216 9.5725C12.7783 9.42398 12.6778 9.29875 12.5421 9.22436C12.4065 9.14997 12.2468 9.13251 12.0983 9.17583H12.0866ZM12.0866 6.25916C11.8821 6.32228 11.6862 6.41045 11.5033 6.52166C11.3175 6.63034 11.1061 6.68761 10.8908 6.68761C10.6755 6.68761 10.4641 6.63034 10.2783 6.52166C9.87385 6.29479 9.41789 6.17564 8.95414 6.17564C8.4904 6.17564 8.03444 6.29479 7.62998 6.52166C7.44218 6.63078 7.22884 6.68825 7.01164 6.68825C6.79445 6.68825 6.58111 6.63078 6.39331 6.52166C5.98885 6.29479 5.53289 6.17564 5.06914 6.17564C4.6054 6.17564 4.14944 6.29479 3.74498 6.52166C3.55915 6.63034 3.34775 6.68761 3.13248 6.68761C2.9172 6.68761 2.70581 6.63034 2.51998 6.52166C2.3371 6.41045 2.14117 6.32228 1.93664 6.25916C1.86026 6.23033 1.77868 6.21785 1.69717 6.22253C1.61566 6.22721 1.53605 6.24894 1.46347 6.28633C1.39089 6.32372 1.32697 6.37593 1.27584 6.43958C1.22471 6.50323 1.18751 6.5769 1.16664 6.65583C1.14519 6.72937 1.13844 6.80642 1.14677 6.88257C1.15509 6.95872 1.17834 7.03248 1.21517 7.09965C1.252 7.16682 1.30171 7.22607 1.36144 7.27403C1.42117 7.32199 1.48977 7.35772 1.56331 7.37916C1.67738 7.41266 1.78705 7.45966 1.88998 7.51917C2.25154 7.73496 2.66475 7.84889 3.08581 7.84889C3.50687 7.84889 3.92008 7.73496 4.28164 7.51917C4.50941 7.39034 4.76664 7.32264 5.02831 7.32264C5.28999 7.32264 5.54721 7.39034 5.77498 7.51917C6.1409 7.7284 6.55512 7.83847 6.97664 7.83847C7.39817 7.83847 7.81239 7.7284 8.17831 7.51917C8.40608 7.39034 8.6633 7.32264 8.92498 7.32264C9.18665 7.32264 9.44388 7.39034 9.67164 7.51917C10.0413 7.73044 10.4592 7.84294 10.885 7.84583C11.2963 7.84498 11.6997 7.73205 12.0516 7.51917C12.1546 7.45966 12.2642 7.41266 12.3783 7.37916C12.5268 7.33585 12.6521 7.2353 12.7265 7.09965C12.8008 6.964 12.8183 6.80435 12.775 6.65583C12.7317 6.50731 12.6311 6.38208 12.4955 6.30769C12.3598 6.2333 12.2002 6.21585 12.0516 6.25916H12.0866Z"
                                      fill="#09A34C"/>
                            </svg>
                        </div>

                        Каталог товаров
                    </a>

                    <?php get_search_form(); ?>
                </div>
            </div>
        </div>
    </div>
    </div>
    <div id="mobile-mnu">
        <div id="close-mnu">×</div>
        <?php if ($logo) { ?>
            <a href="/" class="logo">
                <?= $logo; ?>
            </a>
        <?php } ?>
        <?php
        wp_nav_menu([
            'theme_location' => 'mobileMenu',
            'container' => false,
            'menu' => '',
            'menu_class' => 'menuTop',
            'echo' => true,
            'fallback_cb' => 'wp_page_menu',
            'items_wrap' => '<ul id="%1$s" class="%2$s">%3$s</ul>',
            'depth' => 2,
        ]);
        ?>
        <?php if ($phones) { ?>
            <div class="phones__holder">
                <?php foreach ($phones as $item) { ?>
                    <a href="tel:<?= $item['value']; ?>" class="phone__item">
                        <?= file_get_contents(TEMPLATEPATH . '/assets/images/phone.svg'); ?>
                        <?= $item['name']; ?>
                    </a>
                <?php } ?>
            </div>
        <?php } ?>
        <?php if (!empty($emails)): ?>
            <div class="email__holder">
                <?php foreach ($emails as $item) { ?>
                    <a href="mailto:<?= $item['value']; ?>" class="email__item">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <path fill-rule="evenodd" clip-rule="evenodd"
                                  d="M2.80379 8.35342C2.52364 10.9563 2.53613 13.9583 2.92595 16.5506C3.14165 17.985 4.31232 19.0847 5.75739 19.2103L7.26762 19.3416C10.4167 19.6153 13.5835 19.6153 16.7326 19.3416L18.2428 19.2103C19.6879 19.0847 20.8585 17.985 21.0742 16.5506C21.4641 13.9583 21.4766 10.9565 21.1964 8.35357C21.1602 8.05181 21.1195 7.75046 21.0742 7.44961C20.8585 6.01522 19.6879 4.91557 18.2428 4.78996L16.7326 4.65867C13.5835 4.38493 10.4167 4.38493 7.26762 4.65867L5.75739 4.78996C4.31232 4.91557 3.14165 6.01522 2.92595 7.44961C2.88072 7.75041 2.84 8.05171 2.80379 8.35342ZM7.39752 6.15304C10.4601 5.88681 13.5401 5.88681 16.6027 6.15304L18.1129 6.28432C18.8672 6.34989 19.4783 6.92391 19.5909 7.67267C19.6026 7.75042 19.614 7.82822 19.6251 7.90604L14.064 10.9955C12.7805 11.7086 11.2197 11.7086 9.93608 10.9955L4.37514 7.90608C4.3862 7.82824 4.39758 7.75043 4.40928 7.67267C4.52187 6.92391 5.13296 6.34989 5.88729 6.28432L7.39752 6.15304ZM19.8086 9.52001C20.0026 11.7878 19.93 14.0726 19.5909 16.3276C19.4783 17.0763 18.8672 17.6503 18.1129 17.7159L16.6027 17.8472C13.5401 18.1134 10.4601 18.1134 7.39753 17.8472L5.88729 17.7159C5.13296 17.6503 4.52187 17.0763 4.40928 16.3276C4.07019 14.0726 3.99763 11.7878 4.19159 9.52005L9.20762 12.3067C10.9442 13.2715 13.0559 13.2715 14.7925 12.3067L19.8086 9.52001Z"
                                  fill="#09A34C"/>
                        </svg>

                        <?php echo $item['name']; ?>
                    </a>
                <?php } ?>
            </div>
        <?php endif ?>
        <?php if (!empty($addresses)): ?>
            <div class="adresses__holder">
                <?php foreach ($addresses as $address) { ?>
                    <?= $address['value']; ?>
                <?php } ?>
            </div>
        <?php endif ?>
        <?php if (!empty($socials)): ?>
            <div class="soc__holder">
                <?php foreach ($socials as $item) { ?>
                    <a href="<?= $item['value']; ?>" class="soc__item">
                        <?= get_image($item['icon'], [24, 24]); ?>
                    </a>
                <?php } ?>
            </div>
        <?php endif ?>
    </div>
</header><!-- #masthead -->
